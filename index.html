<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Drinking game</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <style>
            body {
                background-color: green;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }

            #wrapper {
                width: 100%;
                height: 100%;
                position: absolute;
            }
            
            /* Nav */
            /* Made by http://www.bestcssbuttongenerator.com/ */
            #navigation-wrapper .nav-button {
                -moz-box-shadow:inset 0px 1px 0px 0px #caefab;
                -webkit-box-shadow:inset 0px 1px 0px 0px #caefab;
                box-shadow:inset 0px 1px 0px 0px #caefab;
                background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #77d42a), color-stop(1, #5cb811));
                background:-moz-linear-gradient(top, #77d42a 5%, #5cb811 100%);
                background:-webkit-linear-gradient(top, #77d42a 5%, #5cb811 100%);
                background:-o-linear-gradient(top, #77d42a 5%, #5cb811 100%);
                background:-ms-linear-gradient(top, #77d42a 5%, #5cb811 100%);
                background:linear-gradient(to bottom, #77d42a 5%, #5cb811 100%);
                filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#77d42a', endColorstr='#5cb811',GradientType=0);
                background-color:#77d42a;
                -moz-border-radius:6px;
                -webkit-border-radius:6px;
                border-radius:6px;
                border:1px solid #268a16;
                display:inline-block;
                cursor:pointer;
                color:#306108;
                font-family:arial;
                font-size:15px;
                font-weight:bold;
                padding:6px 24px;
                text-decoration:none;
                text-shadow:0px 1px 0px #aade7c;
            }
            #navigation-wrapper .nav-button:hover {
                background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #5cb811), color-stop(1, #77d42a));
                background:-moz-linear-gradient(top, #5cb811 5%, #77d42a 100%);
                background:-webkit-linear-gradient(top, #5cb811 5%, #77d42a 100%);
                background:-o-linear-gradient(top, #5cb811 5%, #77d42a 100%);
                background:-ms-linear-gradient(top, #5cb811 5%, #77d42a 100%);
                background:linear-gradient(to bottom, #5cb811 5%, #77d42a 100%);
                filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#5cb811', endColorstr='#77d42a',GradientType=0);
                background-color:#5cb811;
            }
            #navigation-wrapper .nav-button:active {
                position:relative;
                top:1px;
            }
            /* End http://www.bestcssbuttongenerator.com/ */
            
            #topbar {
                width: 100%;
                text-align: center;
            }
            
            /* Card */
            .current-card-wrapper {
                width: 100%;
            }
            #current-card, 
            #current-card-copy {
                z-index: 5;
                top: 50%;
                left: 50%;
                margin: -176px 0 0 -127px;
                width: 254px;
                height: 352px;
                background-color: white;
                -moz-border-radius:10px;
                -webkit-border-radius:10px;
                border-radius: 10px;
                position: fixed;
            }
            #current-card-copy {
                // left: 60%;
                margin-left: -127px;
                z-index: 4;
            }
            .card-background {
                width: 100%;
                height: 100%;
                position: absolute;
                text-align: center;
            }
            .card-icon, 
            .card-icon-copy {
                width: 18%;
                height: 22%;
                position: absolute;
                font-size: 45px;
                line-height: 39px;
                text-align: center;
            }
            #upper-card-icon, 
            #upper-card-icon-copy {
                top: 2%;
                left: 2%;
            }
            #lower-card-icon,
            #lower-card-icon-copy {
                bottom: 2%;
                right: 2%;
                // Rotate for extra nice effect
                -ms-transform: rotate(180deg); /* IE 9 */
                -webkit-transform: rotate(180deg); /* Chrome, Safari, Opera */
                transform: rotate(180deg);
            }
            .card-icon .card-html-icon, .card-icon .card-html-number {
                width: 100%;
            }
            #card-content-wrapper, 
            #card-content-wrapper-copy {
                width: 80%;
                height: 180px;
                line-height: 180px;
                position: absolute;
                top: 23%;
                left: 10%;
                -ms-transform: rotate(-45deg); /* IE 9 */
                -webkit-transform: rotate(-45deg); /* Chrome, Safari, Opera */
                transform: rotate(-45deg);
                text-align: center;
            }
            #card-content,
            #card-content-copy {
                display: inline-block;
                vertical-align: middle;
                line-height: normal;
                font-size: 30px;
                color: black;
            }

            /* Toolbar */
            #toolbar-wrapper {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                background-color: rgba(255,255,255,0.94);
                z-index: 7;
                overflow: auto;
            }
            #toolbar-toggle {
                font-size: 20px;
                background-color: #085F0F;
                color: #3C8044;
                text-align: center;
            }
            #toolbar-content {
                padding: 5px;
            }
            #toolbar-section-headers-wrapper, 
            #toolbar-section-content-wrapper {
                float: left;
                width: 100%;
            }
            .toolbar-section-content {
                float: left;
                display: none;
            }
            .ruleSet,
            .rulePatternSet {
                display: none;
            }
            .ruleColorSet {
                display: table-cell;
            }
            .debug-number {
                width: 100%;
                display: block;
            }
            
            /* Misc / Global */
            .red {
                color: red;
            }
            .black {
                color: black;
            }
            .bold {
                font-weight: 600;
            }
            #email-icon {
                position: fixed;
                right: 0;
                bottom: 23px;
                width: 44px;
                height: 35px;
                background-color: white;
                border: black 1px solid;
                font-size: 44px;
                line-height: 38px;
            }
            .mail-button:link,
            .mail-button:hover, 
            .mail-button:visited, 
            .mail-button:active {
                color: black;
                text-decoration: none;
                font-size: 44px;
                line-height: 38px;
            }
            .button {
                float: left;
                margin: 5px;
                padding: 3px;
                background-color: #9DB9A0;
                -moz-border-radius:3px;
                -webkit-border-radius:3px;
                border-radius: 3px;
            }
            .button:hover, 
            .button:active, 
            .button.active {
                background-color: #D3F5D6;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div id="topbar">
                <div id="navigation-wrapper">
                    <!-- <a class="nav-button" onclick="deck.getPreviousCard();populateCard(deck.getCurrentCard(),false);">&lt; Föregående kort</a> -->
                    <!-- <a class="nav-button" onclick="deck.getNextCard();populateCard(deck.getCurrentCard(),true);">Nästa kort &gt;</a> -->
                    <a class="nav-button" onclick="deck.animateCardFlip(false);">&lt; Föregående kort</a>
                    <a class="nav-button" onclick="deck.animateCardFlip(true);">Nästa kort &gt;</a>
                </div>
                <div id="card-counter">52 kort kvar</div>
            </div>
            <div id="current-card-wrapper">
                <!-- <div id="current-card" onclick="deck.getNextCard();populateCard(deck.getCurrentCard(),true);"> -->
                <div id="current-card" onclick="deck.animateCardFlip(true);">
                    <div id="card-background"></div>
                    <div id="upper-card-icon" class="card-icon"></div>
                    <div id="card-content-wrapper"><span id="card-content"></span></div>
                    <div id="lower-card-icon" class="card-icon"></div>
                </div>
            </div>
            <div id="current-card-wrapper-copy">
                <div id="current-card-copy">
                    <div id="card-background-copy"></div>
                    <div id="upper-card-icon-copy" class="card-icon-copy"></div>
                    <div id="card-content-wrapper-copy"><span id="card-content-copy"></span></div>
                    <div id="lower-card-icon-copy" class="card-icon-copy"></div>
                </div>
            </div>
            <div id="card-info-text"></div>
        </div>
        <div id="toolbar-wrapper">
            <div id="toolbar-toggle" onclick="toolBar.toggleToolBar();">Inställningar (visa)</div>
            <div id="toolbar-content" style="display: none;">
                <div id="toolbar-section-wrapper">
                    <div id="toolbar-section-headers-wrapper">
                        <div class="toolbar-section-header button" onclick="toolBar.switchTab(this,'card-settings');">Kortinställningar</div>
                        <div class="toolbar-section-header button" onclick="toolBar.switchTab(this,'global-settings');">Globala inställningar</div>
                        <div class="toolbar-section-header button" onclick="toolBar.switchTab(this,'card-statistics');">Statistik</div>
                        <div class="toolbar-section-header button" onclick="toolBar.switchTab(this,'information');">Information</div>
                    </div>
                    <div id="toolbar-section-content-wrapper">
                        <div id="card-settings" class="toolbar-section-content" style="display: block;">
                            <table>
                                <tr>
                                    <td><input type="radio" id="show_color_rules" name="show_rules" onchange="setRuleset();" value="ruleColor" checked/></td>
                                    <td colspan="6">Visa regler per <strong>färg</strong></td>
                                </tr>
                                <tr>
                                    <td><input type="radio" id="show_pattern_rules" name="show_rules" onchange="setRuleset();" value="rulePattern" /></td>
                                    <td colspan="6">Visa regler per <strong>mönster</strong></td>
                                </tr>
                                <tr>
                                    <th>Kort</th>
                                    <th colspan="6">Regel</th>
                                </tr>
                                <tr>
                                    <th></th>
                                    <th class="ruleSet ruleColorSet" style="color: red;">Röda</th>
                                    <th class="ruleSet ruleColorSet" style="color: black;">Svarta</th>
                                    <th class="ruleSet rulePatternSet" style="color: black;">Spader</th>
                                    <th class="ruleSet rulePatternSet" style="color: black;">Klöver</th>
                                    <th class="ruleSet rulePatternSet" style="color: red;">Hjärter</th>
                                    <th class="ruleSet rulePatternSet" style="color: red;">Ruter</th>
                                </tr>
                                <tr>
                                    <td>Kung</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="13-input-red" class="ruleField" name="13-input-red" value="Kung" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="13-input-black" class="ruleField" name="13-input-black" value="Kung" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="13-input-spades" class="ruleField" name="13-input-spades" value="Kung" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="13-input-clubs" class="ruleField" name="13-input-clubs" value="Kung" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="13-input-hearts" class="ruleField" name="13-input-hearts" value="Kung" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="13-input-diams" class="ruleField" name="13-input-diams" value="Kung" /></td>
                                </tr>
                              <tr>
                                    <td>Dam</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="12-input-red" class="ruleField" name="12-input-red" value="Alla damer ger 3 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="12-input-black" class="ruleField" name="12-input-black" value="Alla damer dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="12-input-spades" class="ruleField" name="12-input-spades" value="Alla damer dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="12-input-clubs" class="ruleField" name="12-input-clubs" value="Alla damer dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="12-input-hearts" class="ruleField" name="12-input-hearts" value="Alla damer ger 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="12-input-diams" class="ruleField" name="12-input-diams" value="Alla damer ger 3 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>Knekt</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="11-input-red" class="ruleField" name="11-input-red" value="Alla herrar ger 3 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="11-input-black" class="ruleField" name="11-input-black" value="Alla herrar dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="11-input-spades" class="ruleField" name="11-input-spades" value="Alla herrar dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="11-input-clubs" class="ruleField" name="11-input-clubs" value="Alla herrar dricker 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="11-input-hearts" class="ruleField" name="11-input-hearts" value="Alla herrar ger 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="11-input-diams" class="ruleField" name="11-input-diams" value="Alla herrar ger 3 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>10</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="10-input-red" class="ruleField" name="10-input-red" value="Ny regel" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="10-input-black" class="ruleField" name="10-input-black" value="Ny regel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="10-input-spades" class="ruleField" name="10-input-spades" value="Ta bort regel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="10-input-clubs" class="ruleField" name="10-input-clubs" value="Ta bort regel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="10-input-hearts" class="ruleField" name="10-input-hearts" value="Ny regel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="10-input-diams" class="ruleField" name="10-input-diams" value="Ny regel" /></td>
                                </tr>
                                <tr>
                                    <td>9</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="9-input-red" class="ruleField" name="9-input-red" value="Tummregel" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="9-input-black" class="ruleField" name="9-input-black" value="Tummregel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="9-input-spades" class="ruleField" name="9-input-spades" value="Tummregel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="9-input-clubs" class="ruleField" name="9-input-clubs" value="Tummregel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="9-input-hearts" class="ruleField" name="9-input-hearts" value="Tummregel" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="9-input-diams" class="ruleField" name="9-input-diams" value="Tummregel" /></td>
                                </tr>
                                <tr>
                                    <td>8</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="8-input-red" class="ruleField" name="8-input-red" value="Kategori" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="8-input-black" class="ruleField" name="8-input-black" value="Kategori" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="8-input-spades" class="ruleField" name="8-input-spades" value="Kategori" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="8-input-clubs" class="ruleField" name="8-input-clubs" value="Kategori" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="8-input-hearts" class="ruleField" name="8-input-hearts" value="Kategori" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="8-input-diams" class="ruleField" name="8-input-diams" value="Kategori" /></td>
                                </tr>
                                <tr>
                                    <td>7</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="7-input-red" class="ruleField" name="7-input-red" value="Sifferleken (7an)" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="7-input-black" class="ruleField" name="7-input-black" value="Sifferleken (7an)" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="7-input-spades" class="ruleField" name="7-input-spades" value="Sifferleken (7an)" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="7-input-clubs" class="ruleField" name="7-input-clubs" value="Sifferleken (7an)" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="7-input-hearts" class="ruleField" name="7-input-hearts" value="Sifferleken (7an)" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="7-input-diams" class="ruleField" name="7-input-diams" value="Sifferleken (7an)" /></td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="6-input-red" class="ruleField" name="6-input-red" value="Ge 1 shot" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="6-input-black" class="ruleField" name="6-input-black" value="Drick 1 shot" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="6-input-spades" class="ruleField" name="6-input-spades" value="Drick 1 shot" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="6-input-clubs" class="ruleField" name="6-input-clubs" value="Drick 2 shots" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="6-input-hearts" class="ruleField" name="6-input-hearts" value="Ge 2 shots" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="6-input-diams" class="ruleField" name="6-input-diams" value="Ge 1 shot" /></td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="5-input-red" class="ruleField" name="5-input-red" value="Ge 5 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="5-input-black" class="ruleField" name="5-input-black" value="Drick 5 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="5-input-spades" class="ruleField" name="5-input-spades" value="Drick 5 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="5-input-clubs" class="ruleField" name="5-input-clubs" value="Drick 4 klunkar, ge 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="5-input-hearts" class="ruleField" name="5-input-hearts" value="Ge 4 klunkar, drick 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="5-input-diams" class="ruleField" name="5-input-diams" value="Ge 5 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="4-input-red" class="ruleField" name="4-input-red" value="Ge 4 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="4-input-black" class="ruleField" name="4-input-black" value="Drick 4 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="4-input-spades" class="ruleField" name="4-input-spades" value="Drick 4 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="4-input-clubs" class="ruleField" name="4-input-clubs" value="Drick 3 klunkar, ge 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="4-input-hearts" class="ruleField" name="4-input-hearts" value="Ge 3 klunkar, drick 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="4-input-diams" class="ruleField" name="4-input-diams" value="Ge 4 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="3-input-red" class="ruleField" name="3-input-red" value="Ge 3 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="3-input-black" class="ruleField" name="3-input-black" value="Drick 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="3-input-spades" class="ruleField" name="3-input-spades" value="Drick 3 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="3-input-clubs" class="ruleField" name="3-input-clubs" value="Drick 2 klunkar, ge 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="3-input-hearts" class="ruleField" name="3-input-hearts" value="Ge 2 klunkar, drick 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="3-input-diams" class="ruleField" name="3-input-diams" value="Ge 3 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="2-input-red" class="ruleField" name="2-input-red" value="Ge 2 klunkar" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="2-input-black" class="ruleField" name="2-input-black" value="Drick 2 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="2-input-spades" class="ruleField" name="2-input-spades" value="Drick 2 klunkar" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="2-input-clubs" class="ruleField" name="2-input-clubs" value="Drick 1 klunk, ge 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="2-input-hearts" class="ruleField" name="2-input-hearts" value="Drick 1 klunk, ge 1 klunk" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="2-input-diams" class="ruleField" name="2-input-diams" value="Ge 2 klunkar" /></td>
                                </tr>
                                <tr>
                                    <td>Äss</td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="1-input-red" class="ruleField" name="1-input-red" value="Ge shot" /></td>
                                    <td class="ruleSet ruleColorSet"><input type="text" id="1-input-black" class="ruleField" name="1-input-black" value="Drick shot" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="1-input-spades" class="ruleField" name="1-input-spades" value="Drick 1 shot" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="1-input-clubs" class="ruleField" name="1-input-clubs" value="Drick 2 shots" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="1-input-hearts" class="ruleField" name="1-input-hearts" value="Ge 2 shots" /></td>
                                    <td class="ruleSet rulePatternSet"><input type="text" id="1-input-diams" class="ruleField" name="1-input-diams" value="Ge 1 shot" /></td>
                                </tr>
                                
                            </table>
                            <a class="button" onclick="deck.saveRules();">Spara regler</a>
                            <a class="button" onclick="deck.loadRules();">Ladda regler</a>
                        </div>
                        <div id="global-settings" class="toolbar-section-content">
                            Globala inställningar:<br />
                            <input type="checkbox" id="hide-nav" name="hide-nav" onclick="toolBar.toggleDiv('navigation-wrapper');"> Dölj navigationsknappar<br />
                            <input type="checkbox" id="hide-cardcounter" name="hide-cardcounter" onclick="toolBar.toggleDiv('card-counter');"> Dölj "kort kvar" rutan<br />
                        </div>
                        <div id="card-statistics" class="toolbar-section-content">
                            Statistik
                        </div>
                        <div id="information" class="toolbar-section-content">
                            Information om denna app!<br />
                            <br />
                            Denna app bygger på klassiska fyllespelet "vattenfall"/"kung" m.fl.<br />
                            "Kärt barn har många namn".<br />
                            <br />
                            Enda skillnaden är att detta är en digital version av spelet. Naturligtvis finns många varianter (i form av appar) på detta, men jag har valt att göra det till en webbanpass version för att stödja egentligen vilken enhet som helst.<br />
                            Man får gärna skicka in förslag på ändringar (med knappen nedan), trevliga kommentarer t.o.m. hjälpa till och utveckla spelet vidare.<br />
                            <br />
                            <a class="mail-button" href="">&#9993;</a><br />
                            <br />
                            Historik om spelet (s.k. changelog)<br />
                            <ul>
                                <li><span class="bold">2014-12-27</span>: Supersnygga "bläddringseffekter" för att tydliggöra när man byter kort, ladda/spara spelregler (i cookie)</li>
                                <li><span class="bold">2014-09-21</span>: Möjlighet att se statistik infördes i spelet</li>
                                <li><span class="bold">2014-09-20</span>: Stöd för "swipe" i mobila enheter</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div id="email-icon">
            <a class="mail-button" href="">&#9993;</a>
        </div> -->
        <script type="text/javascript">
            function toolBar(){
                this.toolBarWrapper = document.getElementById('toolbar-wrapper');
                this.toolBarContent = document.getElementById('toolbar-content');
                this.toolBarHeader = document.getElementById('toolbar-toggle');
                this.toolBarIsOpen = false;
                
                this.toggleToolBar = function(){
                    if(this.toolBarIsOpen){
                        this.closeToolBar();
                    } else {
                        this.openToolBar();
                    }
                }
                
                this.openToolBar = function(){
                    this.toolBarContent.style.display = 'block';
                    this.toolBarWrapper.style.height = '100%';
                    this.toolBarHeader.innerHTML = 'Inställningar (dölj)';
                    this.toolBarIsOpen = true;
                }
                
                this.closeToolBar = function(){
                    this.toolBarContent.style.display = 'none';
                    this.toolBarHeader.innerHTML = 'Inställningar (visa)';
                    this.toolBarWrapper.style.height = 'initial';
                    this.toolBarIsOpen = false;
                }
                
                this.switchTab = function(element, tabId){
                    // First, close all tabs
                    var elements = document.getElementById('toolbar-section-content-wrapper').children, i;
                    for(i=0;i<elements.length;++i){
                        elements[i].style.display = 'none';
                    }
                    
                    // Open tab
                    document.getElementById(tabId).style.display = 'block';
                    
                    // Deactive all "active" tab headers
                    var tabs = document.getElementsByClassName('toolbar-section-header');
                    for(var i=0; i<tabs.length; ++i){
                        tabs[i].classList.remove('active');
                    }
                    
                    // Activate current tab header
                    element.classList.add('active');
                    // element.style.backgroundColor='#D3F5D6';
                }
                
                // Toogle functions
                this.toggleDiv = function(id){
                    var div = document.getElementById(id);
                    if(div.style.display === 'block' || div.style.display === ''){
                        div.style.display = 'none';
                    } else {
                        div.style.display = 'block';
                    }
                }
            }
            
            function populateCard(card,populateReal){
                var cardHtml = deck.parseCardToHtml(card), 
                    cardBackgroundHtml = deck.parseCardToBackgroundHtml(card), 
                    iconDivs, 
                    rule = deck.getRule(card), 
                    cardColor = deck.getCardColor(card), 
                    i;
            
                if(populateReal){
                    iconDivs = document.getElementsByClassName('card-icon');
                } else {
                    iconDivs = document.getElementsByClassName('card-icon-copy');
                }
                console.log('Rule in '+rule);
                for(i=0;i<iconDivs.length;++i){
                    iconDivs[i].innerHTML = cardHtml;
                }
                // card = card.substring(1);
                
                // Update card with rule
                if(populateReal){
                    document.getElementById('card-content').innerHTML = rule;
                } else {
                    document.getElementById('card-content-copy').innerHTML = rule;
                }
                
                /* Old card logic
                if(document.getElementById(card+'-input-'+cardColor) !== ''){
                    document.getElementById('card-content').innerHTML = document.getElementById(card+'-input-'+cardColor).value;
                } else {
                    document.getElementById('card-content').innerHTML = document.getElementById(card+'-input').value;
                } */
                // document.getElementById('card-background').innerHTML = cardBackgroundHtml;
                
                // Update cards left counter
                document.getElementById('card-counter').innerHTML = deck.getCardsLeft()+' kort kvar';
                
                // Update card statistics
                document.getElementById('card-statistics').innerHTML = deck.getDealtCardStatistics();
            }
            
            // Whole deck logic
            function cardDeck() {
                this.cards = [
                    // Clubs
                    'c1','c2','c3','c4','c5','c6','c7','c8','c9','c10','c11','c12','c13',
                    // Spades
                    's1','s2','s3','s4','s5','s6','s7','s8','s9','s10','s11','s12','s13',
                    // Hearts
                    'h1','h2','h3','h4','h5','h6','h7','h8','h9','h10','h11','h12','h13',
                    // Diamonds
                    'd1','d2','d3','d4','d5','d6','d7','d8','d9','d10','d11','d12','d13'
                ];
                this.currentCard;
                this.cardDirection = [];
                this.dealtCards = [];
                
                this.shuffleDeck = function(){
                    // Thank you CoolAJ86 for pure cs shuffle script
                    // http://stackoverflow.com/a/2450976
                    array = this.cards;
                    var currentIndex = array.length, tempVal, randIndex;
                    
                    while(currentIndex !== 0){
                        randIndex = Math.floor(Math.random() * currentIndex);
                        --currentIndex;
                        
                        tempVal = array[currentIndex];
                        array[currentIndex] = array[randIndex];
                        array[randIndex] = tempVal;
                    }
                    
                    this.cardDirection = array;
                }
                
                this.getNextCard = function(){
                    // Check if we actually have cards left
                    if(this.cardDirection.length > 0){
                        // Move current card to dealt pool
                        this.dealtCards.push(this.currentCard);

                        // Get new current card
                        this.currentCard = this.cardDirection[0];
                        
                        // Remove that card from dealing pool
                        this.cardDirection.splice(0,1);

                        return this.currentCard;
                    }
                }
                
                this.getPreviousCard = function(){
                    // Only do something if we have a previous card aka a dealt card
                    if(this.dealtCards.length > 0){
                        // Put current card back into dealing deck
                        this.cardDirection.unshift(this.currentCard);
                        
                        // Retrive last card from dealt deck
                        this.currentCard = this.dealtCards[this.dealtCards.length-1];

                        // Remove "current" card from dealt pool
                        this.dealtCards.pop();

                        return this.currentCard;
                    }
                }
                
                this.getCurrentCard = function(){
                    return this.currentCard;
                }
                
                this.getCardsLeft = function(){
                    return this.cardDirection.length;
                }
                
                this.parseCardToHtml = function(cardId){
                    var cardType, outHtml;
                
                    cardType = this.getCardType(cardId,true);
                    cardId = this.parseSpecialCard(cardId);
                    // Determinate color
                    colorClass = (cardType === '&spades;' || cardType === '&clubs;'?'black':'red');
                    // Little html parse, rather than splitting outside function
                    outHtml = '<div class="card-html-number '+colorClass+'">'+cardId+'</div>'+
                            '<div class="card-html-icon '+colorClass+'">'+cardType+'</div>';
                    
                    return outHtml;
                }
                
                this.parseCardToBackgroundHtml = function(cardId){
                    var cardType = this.getCardType(cardId,true), 
                        outHtml;
                
                    cardId = this.parseSpecialCard(cardId);
                    
                    // How do we solve king, dame and knight background?
                    if(isNaN(cardId)){
                        return 'img somehow';
                    }
                    
                    // Fancy function for painting fancy patterns
                    
                    return '<div class="row">'+
                            '<span class="background-icon">'+cardType+'</span>'+
                        '</div>';
                }
                
                this.parseSpecialCard = function(cardId){
                    // Remove cardType letter so we only have number left
                    cardId = cardId.substring(1);
                    // Check for specials like king, dame or knight
                    switch(cardId){
                        case '11':
                            cardId = 'J';
                            break;
                            
                        case '12':
                            cardId = 'D';
                            break;
                            
                        case '13':
                            cardId = 'K';
                            break;
                            
                        default:
                            break;
                    }
                    
                    return cardId;
                }
                
                this.getCardType = function(cardId,htmlEncoded){
                    var cardType;
                    // Check card for "type"
                    // Spades
                    if(cardId.indexOf('s') !== -1){
                        cardType = 'spades';
                    } else
                    // Clubs
                    if(cardId.indexOf('c') !== -1){
                        cardType = 'clubs';
                    } else 
                    // Hearts
                    if(cardId.indexOf('h') !== -1){
                        cardType = 'hearts';
                    } else 
                    // Diamonds
                    if(cardId.indexOf('d') !== -1){
                        cardType = 'diams';
                    }
                
                    if(htmlEncoded){
                        return '&'+cardType+';';
                    }
                    return cardType;
                }
                
                this.getDealtCardStatistics = function(){
                    var cards = this.dealtCards, 
                        currentCard, 
                        currentCountingCard, 
                        cardStatistics = [0,0,0,0,0,0,0,0,0,0,0,0,0],
                        outHtml = '<table><tr><th colspan="2">Antal kort som spelats</th></tr>', 
                        i;
                    
                    // 1st occurence will always be a undefined
                    for(i=1;i<cards.length;++i){
                        currentCountingCard = (cards[i].substring(1))-1;
                        cardStatistics[currentCountingCard] = cardStatistics[currentCountingCard]+1;
                    }
                    
                    // Add "current" card to cards for proper display
                    currentCard = (this.getCurrentCard().substring(1))-1;
                    cardStatistics[currentCard] = cardStatistics[currentCard]+1;

                    for(i=1;i<=cardStatistics.length;++i){
                        // We add "K" to parses, since it expect cardId formats (s4, c13 and such)
                        outHtml += '<tr><td style="width: 30px;">'+this.parseSpecialCard('K'+i)+'</td>'
                                +'<td>'+cardStatistics[i-1]+'</td></tr>';
                    }
                    outHtml += '</table>';

                    return outHtml;
                }
                
                // Gets card color (s/r)
                this.getCardColor = function(cardName){
                    var cardColor;
                    
                    // Spades
                    if(cardName.indexOf('s') !== -1){
                        cardColor = 'black';
                    } else
                    // Clubs
                    if(cardName.indexOf('c') !== -1){
                        cardColor = 'black';
                    } else 
                    // Hearts
                    if(cardName.indexOf('h') !== -1){
                        cardColor = 'red';
                    } else 
                    // Diamonds
                    if(cardName.indexOf('d') !== -1){
                        cardColor = 'red';
                    }
                
                    return cardColor;
                }
                
                this.getRule = function(card){
                    var rule, 
                        cardNumber = card.substring(1),
                        cardExtra;
                    
                    // If ruleset is color, we check thoose two fields
                    switch(ruleSet){
                        case 'ruleColor':
                            cardExtra = this.getCardColor(card);
                            break;
                            
                        case 'rulePattern':
                            var cardExtra = this.getCardType(card,false);
                            break;
                            
                        default:
                            alert('Ruleset not defined...');
                            break;
                    }
                    rule = document.getElementById(cardNumber+'-input-'+cardExtra).value;
                    
                    return rule;
                }
                
                this.animateCardFlip = function(dirForward){
                    var currentCardDiv = document.getElementById('current-card'),
                        copyCardDiv = document.getElementById('current-card-copy'),
                        cardWidth = currentCardDiv.offsetWidth, 
                        cardSpeed = 16, 
                        cardTimerSpeed = 8, 
                        cardMovementOffset = 30, 
                        cardMovement = 0, 
                        cardTimer, 
                        newMarginLeft, 
                        offset, 
                        i;
                    
                    // Check direction of card
                    if(dirForward){
                        // Forward!
                        // Set "current" card to copy, and new card to "real" place
                        if(this.getCurrentCard() !== undefined){
                            console.log('Populating copy ('+this.getCurrentCard()+')');
                            populateCard(this.getCurrentCard(),false);
                            copyCardDiv.style.zIndex='6';
                        }
                        
                        // Set new card to "real"
                        this.getNextCard();
                        populateCard(this.getCurrentCard(),true);
                    } else {
                        console.log('Populating copy ('+this.getCurrentCard()+')');
                        populateCard(this.getCurrentCard(),true);
                        copyCardDiv.style.zIndex='4';
                        
                        this.getPreviousCard();
                        populateCard(this.getCurrentCard(),false);
                    }
                        
                    // Animate copy card
                    // Copy calculated margin to element
                    var originalPos = window.getComputedStyle(copyCardDiv).marginLeft;
                    copyCardDiv.style.marginLeft = originalPos;

                    offset = parseInt(cardWidth+cardMovementOffset);
                    // Move right first
                    cardTimer = setInterval(function() {
                        // Forward / backward (depending on dirForward)
                        if(cardMovement < offset){
                            if(dirForward){
                                newMarginLeft = parseInt(copyCardDiv.style.marginLeft)+cardSpeed;
                            } else {
                                newMarginLeft = parseInt(copyCardDiv.style.marginLeft)-cardSpeed;
                            }
                            copyCardDiv.style.marginLeft = newMarginLeft+'px';
                            cardMovement = cardMovement+cardSpeed;
                        } else if(copyCardDiv.style.marginLeft > originalPos){
                            // Now backwards
                            if(dirForward){
                                copyCardDiv.style.zIndex='4';
                                newMarginLeft = parseInt(copyCardDiv.style.marginLeft)-cardSpeed;
                            } else {
                                copyCardDiv.style.zIndex='6';
                                newMarginLeft = parseInt(copyCardDiv.style.marginLeft)+cardSpeed;
                            }
                            copyCardDiv.style.marginLeft = newMarginLeft+'px';
                        } else {
                            copyCardDiv.style.marginLeft = originalPos;
                            clearInterval(cardTimer);
                        }
                    },cardTimerSpeed);
                }
                
                this.saveRules = function(){
                    var fields = document.getElementsByClassName('ruleField'), 
                        json = '{"rules":[', 
                        rules = [];
                    
                    for(var i=0; i<fields.length; ++i){
                        var key = fields[i].id,
                            value =  fields[i].value;
                        
                        json += '{"id":"'+key+'","value":"'+value+'"},';
                    }
                    json = json.substring(0,json.length-1);
                    json += ']}';
                    setCookie('rules',json,30);
                }
                
                this.loadRules = function(inputRules){
                    var rules;
                    if(inputRules === undefined){
                        var json = JSON.parse(getCookie('rules'));
                        rules = json['rules'];
                    } else {
                        rules = inputRules;
                    }
                    
                    for(var i=0;i<rules.length;++i){
                        document.getElementById(rules[i]['id']).value = rules[i]['value'];
                    }
                }
            }
            
            function mailer() {
                this.addEmails = function(){
                    var mailLinks = document.getElementsByClassName('mail-button'), i;
                    for(i=0;i<mailLinks.length;++i){
                        mailLinks[i].href = 'mailto:'+this.createEncodedEmail();
                    }
                }
                
                this.createEncodedEmail = function(){
                    var a = 'admin';
                    var b = 'klorixx';
                    var c = '.se';
                    var d = '@';

                    return a+d+b+c;
                }
            }
            
            /**
             * Cred to http://www.w3schools.com/js/js_cookies.asp
             */
            function setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                var expires = "expires="+d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires;
            }
            
            /**
             * Cred to http://www.w3schools.com/js/js_cookies.asp
             */
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i=0; i<ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1);
                    if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
                }
                return "";
            }
            
            // Lib found at http://www.javascriptkit.com/javatutors/touchevents2.shtml
            function swipedetect(el, callback){
                var touchsurface = el,
                swipedir,
                startX,
                startY,
                distX,
                distY,
                threshold = 100, //required min distance traveled to be considered swipe
                restraint = 100, // maximum distance allowed at the same time in perpendicular direction
                allowedTime = 300, // maximum time allowed to travel that distance
                elapsedTime,
                startTime,
                handleswipe = callback || function(swipedir){}

                touchsurface.addEventListener('touchstart', function(e){
                    var touchobj = e.changedTouches[0]
                    swipedir = 'none'
                    dist = 0
                    startX = touchobj.pageX;
                    startY = touchobj.pageY;
                    startTime = new Date().getTime() // record time when finger first makes contact with surface
                    e.preventDefault()
                }, false);

                touchsurface.addEventListener('touchmove', function(e){
                    e.preventDefault() // prevent scrolling when inside DIV
                }, false);

                touchsurface.addEventListener('touchend', function(e){
                    var touchobj = e.changedTouches[0]
                    distX = touchobj.pageX - startX; // get horizontal dist traveled by finger while in contact with surface
                    distY = touchobj.pageY - startY; // get vertical dist traveled by finger while in contact with surface
                    elapsedTime = new Date().getTime() - startTime // get time elapsed
                    if (elapsedTime <= allowedTime){ // first condition for awipe met
                        if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint){ // 2nd condition for horizontal swipe met
                            swipedir = (distX < 0)? 'left' : 'right' // if dist traveled is negative, it indicates left swipe
                        } else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint){ // 2nd condition for vertical swipe met
                            swipedir = (distY < 0)? 'up' : 'down' // if dist traveled is negative, it indicates up swipe
                        }
                    }
                    handleswipe(swipedir)
                    e.preventDefault()
                }, false);
           }
            
            var deck, 
                ruleSet, 
                toolBar, 
                mailer, 
                lastTouchEvent, 
                xDown = null, 
                yDown = null;
        
            function setRuleset(){
                var rules = document.getElementsByName('show_rules'),
                    i;
                for(i=0; i<rules.length; ++i){
                    if(rules[i].checked){
                        ruleSet = rules[i].value;
                        break;
                    }
                }
                
                // Hide all elements with ruleSet class
                var hideAll = document.getElementsByClassName('ruleSet'), show;
                for(i=0; i<hideAll.length; ++i){
                    hideAll[i].style.display = 'none';
                }
                switch(ruleSet){
                    case 'ruleColor':
                        show = document.getElementsByClassName('ruleColorSet');
                        break;
                        
                    case 'rulePattern':
                        show = document.getElementsByClassName('rulePatternSet');
                        break;
                        
                    default:
                        alert('Ruleset not implemented');
                        break;
                }
                
                // Show all ruleSet with current ruleSet
                for(i=0; i<show.length; ++i){
                    show[i].style.display = 'table-cell';
                }
            }
            
            function initiateGame(){                
                // Initiate toolbar
                toolBar = new toolBar();
                
                // Initiate deck
                deck = new cardDeck();
                deck.shuffleDeck();
                deck.loadRules();
                
                // Assign standard rules
                setRuleset();
                
                // Create mail hrefs
                mailer = new mailer();
                mailer.addEmails();
                
                // Add swipe listeners
                swipedetect(document.getElementById('wrapper'),function(cb){
                    if(cb === 'left'){
                        // deck.getNextCard();
                        deck.animateCardFlip(false);
                    }
                    if(cb === 'right'){
                        // deck.getPreviousCard();
                        deck.animateCardFlip(true);
                    }
//                    if(cb === 'right' || cb === 'left'){
//                        populateCard(deck.getCurrentCard(),true);
//                    }
                    
                    if(cb === 'up'){
                        toolBar.openToolBar();
                    }
                    if(cb === 'down'){
                        toolBar.closeToolBar();
                    }
                });
            }
            
            window.onload = initiateGame();
        </script>
    </body>
</html>
